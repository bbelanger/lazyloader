// adapted from https://gist.github.com/4157402
(function(e,t,n){"use strict";var r=e(t);t.watchResize=function(e){function i(){var r=t.innerWidth;clearTimeout(n);n=null;if(e.size!==r){e();e.size=r}}var n;e.size=0;r.bind("resize",function(){if(n){clearTimeout(n);n=null}n=setTimeout(i,50)});e()};t.watchScroll=function(e){function n(){var n=r.scrollTop();clearTimeout(t);t=null;if(e.scroll!==n){e();e.scroll=n}}var t;e.scroll=0;r.bind("scroll",function(){if(t){clearTimeout(t);t=null}t=setTimeout(n,50)});e()}})(jQuery,window,document);(function(e,t,n,r){"use strict";function v(){a=e("["+r+'="0"]');o=i.scrollTop();h=s.height();u=o+h*1.25;p=a.length;while(p--){f=a.eq(p);l=f.offset().top;c=l+h/2;t.console.log(f,l,c);l>=o&&c<=u&&f.attr(r,"1").attr(n,f.data(n))}}var i=e("body"),s=e(t),o,u,a,f,l,c,h,p,d=e('script[src$="lazyloader.js"],script[src$="lazyloader.min.js"]').data("blank-image")||"/img/blank.gif";e.fn.lazy=function(){p=this.length;while(p--){f=this.eq(p);f.data(n,f.attr(n)).attr(n,d).attr(r,"0")}v()};t.watchResize(v);t.watchScroll(v)})(jQuery,window,"src","data-lazy-loaded");